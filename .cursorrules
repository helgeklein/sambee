# AI Coding Assistant Rules for Sambee

## ❌ CRITICAL: NEVER USE TABS ❌
**This is the #1 rule. Tabs will cause immediate lint failures.**

### Indentation - MANDATORY
- **Frontend (TypeScript/JavaScript/JSON/CSS)**: 2 spaces
- **Backend (Python)**: 4 spaces
- Configure to insert spaces when generating code
- This is non-negotiable - tabs will break the linter

### Formatting Tools
- **Frontend**: Biome formatter (`npm run format`)
- **Backend**: Black/Ruff (if configured)
- All code must pass `npm run lint` in the frontend directory
- Always suggest running formatters after code changes

## Code Style Guidelines

### TypeScript/JavaScript
- Use double quotes for strings
- Trailing commas in multi-line objects/arrays (ES5 style)
- Max line width: 100 characters
- Use const/let, never var
- Prefer arrow functions
- Organize imports: external packages first, then internal

### Python
- Follow PEP 8
- Type hints required
- Run `mypy app` for type checking
- Use descriptive variable names

## Testing Requirements
- **All new features must include tests**
- Maintain coverage thresholds: 80% lines, 80% functions, 75% branches
- Tests go in `__tests__` directories (frontend) or `tests/` directory (backend)
- Use existing fixtures and patterns

### Running Tests
```bash
# Frontend
cd frontend && npm test

# Backend
cd backend && pytest -v
```

## Development Workflow

### Before Submitting Code
1. Use spaces for ALL indentation (2 for TS/JS, 4 for Python)
2. Run formatters: `npm run format` (frontend)
3. Run linters: `npm run lint` (frontend) or `mypy app` (backend)
4. Ensure all tests pass
5. No console.log or debug print statements

### When Creating/Editing Code
1. **ALWAYS use spaces for indentation** - never tabs
2. Match the existing code style in the file
3. After making changes, remind user to run `npm run lint` or `npm run format`
4. Add tests for new functionality
5. Update documentation if behavior changes

## Project Structure
```
sambee/
├── backend/         # FastAPI backend
│   ├── app/
│   │   ├── api/    # API endpoints
│   │   ├── core/   # Core utilities
│   │   ├── db/     # Database models
│   │   └── storage/# Storage backends
│   └── tests/
└── frontend/        # React + TypeScript + Vite
    ├── src/
    │   ├── components/
    │   ├── pages/
    │   ├── services/
    │   └── types/
    └── __tests__/
```

## Common Commands
```bash
# Frontend
npm run dev          # Start dev server
npm test            # Run tests
npm run lint        # Check for issues
npm run format      # Auto-fix formatting

# Backend
uvicorn app.main:app --reload  # Start dev server
pytest -v                       # Run tests
mypy app                        # Type check
```

## File Naming Conventions
- Components: PascalCase (`LoginForm.tsx`)
- Utilities: camelCase (`apiService.ts`)
- Tests: `*.test.tsx` or `test_*.py`
- Types: `types/index.ts` (frontend) or type hints (backend)

## Import Organization (Biome handles this automatically)
```typescript
// External packages
import React from "react";
import { Box } from "@mui/material";

// Internal imports
import { apiService } from "@/services/api";
import type { User } from "@/types";
```

## Why This Matters
The project uses Biome formatter which enforces spaces. Tabs cause immediate lint failures and must be manually fixed. Following these rules ensures code can be merged without formatting issues.

